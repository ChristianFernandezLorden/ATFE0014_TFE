\documentclass[12pt, twoside]{report}

\usepackage{shellesc}

\usepackage[a4paper,width=150mm,top=30mm,bottom=40mm,bindingoffset=6mm,headheight=10mm]{geometry}

\usepackage{fancyhdr}

%\usepackage{biblatex}
\usepackage[square,numbers]{natbib}
%\addbibresource{references.bib}
\bibliographystyle{abbrvnat}

\usepackage{graphicx}
\graphicspath{ {./images/} }

\usepackage{siunitx}

\usepackage{placeins}

\usepackage{csquotes}

\usepackage{enumitem}

\usepackage{algorithm}
\usepackage{algpseudocode}

%%% Tikz 
\usepackage{tikz}
\usepackage{pgfplots}\pgfplotsset{compat=1.18}
%\usepackage{pgfplotstable}
\usepackage{pgfmath}
\usetikzlibrary{arrows.meta,positioning,calc,intersections,external,shapes,angles,patterns,quotes}
\usepgfplotslibrary{units, groupplots, statistics, colormaps}

\usepgfplotslibrary{external}
\tikzexternalize
\tikzsetexternalprefix{figures/}
%\tikzset{external/force remake}
%\tikzset{external/remake next}

\newcommand{\inserttikzfig}[1]{
\tikzsetnextfilename{#1}%image name
\input{#1}}

\usepackage{amsmath} % for the equation* environment
\usepackage{amsfonts}
\usepackage{amssymb}

\usepackage{caption}
\usepackage{subcaption}

\usepackage{hyperref}

\usepackage{cleveref}

\crefname{figure}{figure}{figures}
\Crefname{figure}{Figure}{Figures}
\crefname{equation}{equation}{equations}
\Crefname{equation}{Equation}{Equations}

\newcommand{\mytitle}{Neuromorphic control of embodied central pattern generators}
\newcommand{\mysubtitle}{A bio-inspired approach to motion}
\newcommand{\myname}{Christian Fernandez Lorden}
\newcommand{\mychaptername}{Undefined}
\newcommand{\mychapterdesignation}{Chapter}
\newcommand{\mychapter}[1]{\chapter{#1}\renewcommand{\mychaptername}{\mychapterdesignation~\thechapter : #1}}

\pagestyle{fancy}
\fancyhead{}
\fancyhead[RO,LE]{\mytitle}
\fancyfoot{}
\fancyfoot[LE,RO]{\thepage}
\fancyfoot[LO,RE]{\mychaptername}
%\fancyfoot[CO,CE]{\myname}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

\fancypagestyle{plain}{%
    \fancyhead{}
    \fancyfoot{}
    \fancyfoot[LE,RO]{\thepage}
    \fancyfoot[LO,RE]{\mychaptername}
    %\fancyfoot[CO,CE]{\myname}
    \renewcommand{\headrulewidth}{0pt}
    \renewcommand{\footrulewidth}{0.4pt}
}

\hypersetup{% PDF METADATA
    pdfinfo={%
    Title={\mytitle},%
    Author={\myname},%
    Subject={Neuromorphic Engineering},%
    Producer={LuaLaTeX with hyperref and pgfplots},%
    Creator={\myname},%
    Keywords={Neuron, Control, Pendulum, Neuromodulation, Engineering, Bursting, Spiking, CPG},%
    },%
    %keeppdfinfo 
}%

\allowdisplaybreaks % Allow equation to page break

\begin{document}
    \input{titlepage.tex}
    \newpage 
    \thispagestyle{empty}
    \mbox{}
    \newpage
    
    %\chapter*{Dedication}
    %To mum and dad

    %\chapter*{Declaration}
    %I declare that..
    
    \input{abstract.tex}
    \pagenumbering{roman}
    \renewcommand{\mychaptername}{Abstract} % DONE
    
    \chapter*{Acknowledgements} % DONE 
    \input{acknowledgement.tex}
    \renewcommand{\mychaptername}{Acknowledgements}
    
    \newpage
    \renewcommand{\mychaptername}{Contents}
    \tableofcontents
    
    \mychapter{Introduction}
    \pagenumbering{arabic}
    \input{chapters/introduction.tex} % Can be fluffed
    
    \mychapter{Neurons and CPGs}
    % Principle of models 
    % CPG and feedback => embodied
    % Rhytms , excitablility
    % Connection of CPG and motor rythms
    \input{chapters/neuronandcpg.tex} % Can be fluffed
    
    \mychapter{Modeling and analysis of neuronal circuits.}
    \input{chapters/neuroncircuits.tex}

    \mychapter{A neuromorphic sensorimotor loop for pendulum swing}
    \input{chapters/pendulum.tex}

    \mychapter{Neuromodulation for adaptive amplitude control}
    \input{chapters/neuromod.tex}

    \mychapter{Simple interconnection of controller-pendulum systems}
    \input{chapters/network.tex}

    \mychapter{Conclusion}
    \input{chapters/conclusion.tex}
    \newpage
    \renewcommand{\mychaptername}{Bibliography}
    
    \bibliography{references}
    
    \newpage
    \appendix
    \renewcommand{\mychapterdesignation}{Appendix}
    \mychapter{Signal Analysis Algorithms}
    \input{chapters/algos.tex}
\end{document}


